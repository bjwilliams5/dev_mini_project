---------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:/Users/bjwil/OneDrive/Desktop/Mini-Project/stata/results.log
  log type:  text
 opened on:   6 Oct 2023, 16:29:27

. 
. *-- Open data
. use "$root/stata/pension65_stata.dta", replace

. 
. 
. gen water1 = (drnk_wtr_src == 13 | drnk_wtr_src == 22 | drnk_wtr_src == 41 | drnk_wtr_src == 42 | drnk_wtr_src == 4
> 3 | drnk_wtr_src == 51)

. gen water2 = (drnk_wtr_src == 11 | drnk_wtr_src == 12 | drnk_wtr_src == 21 | drnk_wtr_src == 71)

. 
. * ======================================= *
. * >>>>>>>>>>> Generate variables <<<<<<<<<
. * ======================================= *
. 
. * -- local of interest
. local instlist9 "floor1 floor2 wall1 wall2 wall3 water1 water2 rural residence edu"

. local depvarlist "employed poor_mental_health medical_care"

. 
. * -- post and pre treatment observations
. gen postyears = 1 if  year>=2012
(200,078 missing values generated)

. gen preyears = 1 if year<=2011
(744,665 missing values generated)

. 
. * -- interaction for test
.         gen i2014 = year==2014 if year>=2014 & year<=2017 
(402,386 missing values generated)

.         gen i2015 = year==2015 if year>=2014 & year<=2017 
(402,386 missing values generated)

.         gen i2016 = year==2016 if year>=2014 & year<=2017 
(402,386 missing values generated)

.         gen i2017 = year==2017 if year>=2014 & year<=2017 
(402,386 missing values generated)

. 
.         foreach v in `instlist9'        {
  2.                 gen i2014i`v' = i2014*`v'
  3.                 gen i2015i`v' = i2015*`v'
  4.                 gen i2016i`v' = i2016*`v'
  5.                 gen i2017i`v' = i2017*`v'
  6. 
.                 local inter2014 "`inter2014'  i2014i`v'"
  7.                 local inter2015 "`inter2015'  i2015i`v'"
  8.                 local inter2016 "`inter2016'  i2016i`v'"
  9.                 local inter2017 "`inter2017'  i2017i`v'"
 10.         }
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,386 missing values generated)
(402,990 missing values generated)
(402,990 missing values generated)
(402,990 missing values generated)
(402,990 missing values generated)

. 
.         gen i2014D = i2014*pension65 
(845,018 missing values generated)

.         gen i2015D = i2015*pension65 
(845,018 missing values generated)

.         gen i2016D = i2016*pension65 
(845,018 missing values generated)

.         gen i2017D = i2017*pension65 
(845,018 missing values generated)

. 
. * -- program
. run "$root/stata/p1_gmmdidm.do"

. 
. * ======================================= *
. * >>>>>> Descriptive <<<<<<<<
. * ======================================= *
. 
. * --------------------- Table 1: Descriptive statistics ---------------------
. sum pension65 `depvarlist' `instlist9' preyears postyears 

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
   pension65 |    120,051    .2151002    .4470875          0          9
    employed |    944,743    .4380821    .4961516          0          1
poor_menta~h |    944,743    .0391419    .1939325          0          1
medical_care |    944,743    .0898149    .2859165          0          1
      floor1 |    944,743    .4325864    .4954348          0          1
-------------+---------------------------------------------------------
      floor2 |    944,743    .5482496    .4976668          0          1
       wall1 |    944,743    .1529315    .3599217          0          1
       wall2 |    944,743    .3823961    .4859728          0          1
       wall3 |    944,743    .4458758    .4970622          0          1
      water1 |    944,743    .1121247    .3155199          0          1
-------------+---------------------------------------------------------
      water2 |    944,743    .8349922    .3711878          0          1
       rural |    944,743    .3603255    .4800951          0          1
   residence |    944,743    1.836859    1.034471          0          3
        educ |    943,764    2.294869    1.816114          0          5
    preyears |    200,078           1           0          1          1
-------------+---------------------------------------------------------
   postyears |    744,665           1           0          1          1

. * ---------------------------------------------------------------------------
. 
. * --------------------- Table 2: propensity scores  -------------------------
. reg pension65 `instlist9'  

      Source |       SS           df       MS      Number of obs   =   119,781
-------------+----------------------------------   F(10, 119770)   =   2646.52
       Model |  4292.16655        10  429.216655   Prob > F        =    0.0000
    Residual |  19424.4999   119,770  .162181681   R-squared       =    0.1810
-------------+----------------------------------   Adj R-squared   =    0.1809
       Total |  23716.6664   119,780   .19800189   Root MSE        =    .40272

------------------------------------------------------------------------------
   pension65 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
      floor1 |   .1849683   .0181695    10.18   0.000     .1493564    .2205801
      floor2 |  -.0043119   .0183709    -0.23   0.814    -.0403186    .0316948
       wall1 |   .0580375   .0174692     3.32   0.001     .0237982    .0922769
       wall2 |   .1401398   .0174482     8.03   0.000     .1059416    .1743379
       wall3 |  -.0012273   .0175502    -0.07   0.944    -.0356253    .0331708
      water1 |  -.0439001   .0079445    -5.53   0.000    -.0594711    -.028329
      water2 |   .0018169    .006867     0.26   0.791    -.0116423    .0152761
       rural |   .0211044   .0046521     4.54   0.000     .0119865    .0302224
   residence |   .0363542   .0020366    17.85   0.000     .0323624    .0403459
        educ |  -.0173022   .0006699   -25.83   0.000    -.0186152   -.0159893
       _cons |   .0595267   .0169556     3.51   0.000     .0262941    .0927593
------------------------------------------------------------------------------

.         sum `instlist9'  if pension65==1 & e(sample) 

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
      floor1 |     25,267    .7727075    .4190914          0          1
      floor2 |     25,267    .2235722    .4166468          0          1
       wall1 |     25,267    .1346024    .3413052          0          1
       wall2 |     25,267    .7214944    .4482724          0          1
       wall3 |     25,267    .1383227    .3452452          0          1
-------------+---------------------------------------------------------
      water1 |     25,267    .1384414    .3453696          0          1
      water2 |     25,267    .8174694    .3862888          0          1
       rural |     25,267    .6379863    .4805923          0          1
   residence |     25,267    2.477105    .7777049          0          3
        educ |     25,267    1.392844    1.496911          0          5

.         sum `instlist9'  if pension65==0 & e(sample) 

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
      floor1 |     94,456    .2775684    .4478016          0          1
      floor2 |     94,456     .714682    .4515682          0          1
       wall1 |     94,456    .0908148     .287347          0          1
       wall2 |     94,456    .2911303    .4542858          0          1
       wall3 |     94,456     .609956    .4877624          0          1
-------------+---------------------------------------------------------
      water1 |     94,456    .0630664    .2430836          0          1
      water2 |     94,456    .9099263    .2862888          0          1
       rural |     94,456    .2376556    .4256493          0          1
   residence |     94,456    1.525705    1.039975          0          3
        educ |     94,456    2.486279    1.905341          0          5

. 
. foreach v in `instlist9' {
  2.         reg `v' pension65  
  3. } 

      Source |       SS           df       MS      Number of obs   =   120,051
-------------+----------------------------------   F(1, 120049)    =  19864.45
       Model |  4023.29872         1  4023.29872   Prob > F        =    0.0000
    Residual |  24314.4417   120,049  .202537644   R-squared       =    0.1420
-------------+----------------------------------   Adj R-squared   =    0.1420
       Total |  28337.7404   120,050  .236049483   Root MSE        =    .45004

------------------------------------------------------------------------------
      floor1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
   pension65 |   .4094657   .0029052   140.94   0.000     .4037715    .4151599
       _cons |   .2938032   .0014414   203.83   0.000     .2909781    .2966283
------------------------------------------------------------------------------

      Source |       SS           df       MS      Number of obs   =   120,051
-------------+----------------------------------   F(1, 120049)    =  19322.79
       Model |  3955.06819         1  3955.06819   Prob > F        =    0.0000
    Residual |  24572.1243   120,049  .204684123   R-squared       =    0.1386
-------------+----------------------------------   Adj R-squared   =    0.1386
       Total |  28527.1924   120,050  .237627592   Root MSE        =    .45242

------------------------------------------------------------------------------
      floor2 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
   pension65 |  -.4059788   .0029206  -139.01   0.000    -.4117031   -.4002545
       _cons |   .6985664    .001449   482.10   0.000     .6957263    .7014064
------------------------------------------------------------------------------

      Source |       SS           df       MS      Number of obs   =   120,051
-------------+----------------------------------   F(1, 120049)    =    314.43
       Model |  28.2314254         1  28.2314254   Prob > F        =    0.0000
    Residual |  10778.6785   120,049  .089785658   R-squared       =    0.0026
-------------+----------------------------------   Adj R-squared   =    0.0026
       Total |  10806.9099   120,050  .090020074   Root MSE        =    .29964

------------------------------------------------------------------------------
       wall1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
   pension65 |   .0342999   .0019343    17.73   0.000     .0305086    .0380911
       _cons |   .0926462   .0009597    96.54   0.000     .0907653    .0945272
------------------------------------------------------------------------------

      Source |       SS           df       MS      Number of obs   =   120,051
-------------+----------------------------------   F(1, 120049)    =  14879.01
       Model |  3124.72454         1  3124.72454   Prob > F        =    0.0000
    Residual |  25211.3617   120,049  .210008928   R-squared       =    0.1103
-------------+----------------------------------   Adj R-squared   =    0.1103
       Total |  28336.0863   120,050  .236035704   Root MSE        =    .45827

------------------------------------------------------------------------------
       wall2 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
   pension65 |   .3608546   .0029583   121.98   0.000     .3550563    .3666528
       _cons |   .3042011   .0014677   207.26   0.000     .3013244    .3070779
------------------------------------------------------------------------------

      Source |       SS           df       MS      Number of obs   =   120,051
-------------+----------------------------------   F(1, 120049)    =  16913.03
       Model |  3704.51609         1  3704.51609   Prob > F        =    0.0000
    Residual |  26294.7246   120,049  .219033267   R-squared       =    0.1235
-------------+----------------------------------   Adj R-squared   =    0.1235
       Total |  29999.2407   120,050  .249889552   Root MSE        =    .46801

------------------------------------------------------------------------------
       wall3 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
   pension65 |  -.3929091   .0030212  -130.05   0.000    -.3988306   -.3869876
       _cons |   .5951228   .0014989   397.03   0.000     .5921849    .5980607
------------------------------------------------------------------------------

      Source |       SS           df       MS      Number of obs   =   120,051
-------------+----------------------------------   F(1, 120049)    =   1280.93
       Model |  92.1363315         1  92.1363315   Prob > F        =    0.0000
    Residual |  8635.05128   120,049   .07192939   R-squared       =    0.0106
-------------+----------------------------------   Adj R-squared   =    0.0105
       Total |  8727.18761   120,050  .072696273   Root MSE        =     .2682

------------------------------------------------------------------------------
      water1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
   pension65 |   .0619643   .0017313    35.79   0.000      .058571    .0653577
       _cons |   .0655962    .000859    76.37   0.000     .0639127    .0672798
------------------------------------------------------------------------------

      Source |       SS           df       MS      Number of obs   =   120,051
-------------+----------------------------------   F(1, 120049)    =   1418.02
       Model |  136.707865         1  136.707865   Prob > F        =    0.0000
    Residual |  11573.6644   120,049  .096407837   R-squared       =    0.0117
-------------+----------------------------------   Adj R-squared   =    0.0117
       Total |  11710.3723   120,050  .097545791   Root MSE        =     .3105

------------------------------------------------------------------------------
      water2 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
   pension65 |  -.0754785   .0020044   -37.66   0.000     -.079407   -.0715499
       _cons |   .9066903   .0009945   911.74   0.000     .9047412    .9086394
------------------------------------------------------------------------------

      Source |       SS           df       MS      Number of obs   =   120,051
-------------+----------------------------------   F(1, 120049)    =  13325.18
       Model |   2618.5215         1   2618.5215   Prob > F        =    0.0000
    Residual |  23590.7384   120,049  .196509245   R-squared       =    0.0999
-------------+----------------------------------   Adj R-squared   =    0.0999
       Total |  26209.2599   120,050  .218319533   Root MSE        =    .44329

------------------------------------------------------------------------------
       rural | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
   pension65 |   .3303349   .0028617   115.43   0.000     .3247261    .3359437
       _cons |   .2509497   .0014198   176.75   0.000      .248167    .2537324
------------------------------------------------------------------------------

      Source |       SS           df       MS      Number of obs   =   120,051
-------------+----------------------------------   F(1, 120049)    =  14790.96
       Model |   14907.108         1   14907.108   Prob > F        =    0.0000
    Residual |  120991.669   120,049  1.00785237   R-squared       =    0.1097
-------------+----------------------------------   Adj R-squared   =    0.1097
       Total |  135898.777   120,050  1.13201813   Root MSE        =    1.0039

------------------------------------------------------------------------------
   residence | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
   pension65 |   .7881757   .0064807   121.62   0.000     .7754736    .8008779
       _cons |   1.556505   .0032153   484.09   0.000     1.550203    1.562807
------------------------------------------------------------------------------

      Source |       SS           df       MS      Number of obs   =   119,781
-------------+----------------------------------   F(1, 119779)    =   5890.72
       Model |  19854.0326         1  19854.0326   Prob > F        =    0.0000
    Residual |   403701.99   119,779  3.37039039   R-squared       =    0.0469
-------------+----------------------------------   Adj R-squared   =    0.0469
       Total |  423556.023   119,780   3.5361164   Root MSE        =    1.8359

------------------------------------------------------------------------------
        educ | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
   pension65 |  -.9149504    .011921   -76.75   0.000    -.9383154   -.8915854
       _cons |   2.452294    .005891   416.28   0.000     2.440748     2.46384
------------------------------------------------------------------------------

. * ---------------------------------------------------------------------------
. 
. 
. * ======================================= *
. * >>>>> Regressions <<<<<<<<<
. * ======================================= *
. * It computes the GMM to build Figures 2 and 3
. egen cvar = group(cluster year)
(411 missing values generated)

. local sample "age>=65 & year~=2012 & year~=2013 & year<=2017"

. 
. foreach depvar in `depvarlist'  {
  2. local cloop = `cloop' + 1
  3. 
. di ""
  4. di ""
  5. di ""
  6. di ""
  7. di ">>>>>>>>>>> <<<<<<<<<<<<<"
  8. di in yellow "sample: `sample'"
  9. di ""
 10. di in yellow "depvar: `depvar'"
 11. di ""
 12. di in yellow "instruments: `instlist9'"
 13. di ">>>>>>>>>>> <<<<<<<<<<<<<"
 14. 
.  capture timer clear 1
 15.  timer on 1
 16. 
.  gmmdidm `depvar' pension65  if `sample', inst(`instlist9') time(year) yfirst( 2014 2015 2016 2017 ) ysecond( 2010 
> 2011 2014 2015 2016 2017) ref(2011) max(10) new cluster(cvar) 
 17. 
.  timer off 1
 18.  timer list 1
 19. 
. * -- matrix for graph 
. matrix M`depvar'_1 = [_b[/did2010],_b[/did2010] - invnorm(0.975)*_se[/did2010] , _b[/did2010] + invnorm(0.975)*_se[
> /did2010] , _b[/did2010] - invnorm(0.95)*_se[/did2010] , _b[/did2010] + invnorm(0.95)*_se[/did2010]]
 20. matrix M`depvar'_2 = [0,0,0,0,0]
 21. matrix M`depvar'_3 = [_b[/did2014],_b[/did2014] - invnorm(0.975)*_se[/did2014] , _b[/did2014] + invnorm(0.975)*_
> se[/did2014] , _b[/did2014] - invnorm(0.95)*_se[/did2014] , _b[/did2014] + invnorm(0.95)*_se[/did2014]]
 22. matrix M`depvar'_4 = [_b[/did2015],_b[/did2015] - invnorm(0.975)*_se[/did2015] , _b[/did2015] + invnorm(0.975)*_
> se[/did2015] , _b[/did2015] - invnorm(0.95)*_se[/did2015] , _b[/did2015] + invnorm(0.95)*_se[/did2015]]
 23. matrix M`depvar'_5 = [_b[/did2016],_b[/did2016] - invnorm(0.975)*_se[/did2016] , _b[/did2016] + invnorm(0.975)*_
> se[/did2016] , _b[/did2016] - invnorm(0.95)*_se[/did2016] , _b[/did2016] + invnorm(0.95)*_se[/did2016]]
 24. matrix M`depvar'_6 = [_b[/did2017],_b[/did2017] - invnorm(0.975)*_se[/did2017] , _b[/did2017] + invnorm(0.975)*_
> se[/did2017] , _b[/did2017] - invnorm(0.95)*_se[/did2017] , _b[/did2017] + invnorm(0.95)*_se[/did2017]]
 25. matrix M`depvar' = [M`depvar'_1 \M`depvar'_2 \M`depvar'_3 \M`depvar'_4 \M`depvar'_5 \M`depvar'_6]
 26. 
. matrix list M`depvar'
 27. 
. 
. * >> post treatment indicators <<
. 
. * -- propensity score F and correlation
. di in y "---------- Propensity score ------------"
 28. di ""
 29. di in y "F-stat = " r(F)
 30. di in y "corr(D,Dhat) = " r(corrDD)
 31. di ""
 32. di in y "----------------------------------------"
 33. * -- overid test
. di in y "---------- Overid test -----------------"
 34. di ""
 35. estat overid
 36. di ""
 37. di in y "----------------------------------------"
 38. 
. * -- Stationarity of propensity score post-treatment ``test''
.         reg pension65 i2014 i2016 i2017 `instlist9' `inter2014' `inter2016' `inter2017'   if `sample' & year~=. & (
> year>=2014 & year<=2017) & `depvar'~=., cluster(cvar)
 39.                 test `inter2014' `inter2016' `inter2017'
 40. 
. if "`depvar'"=="employed"       {
 41.         reg pension65 i2014 i2017       `instlist9' `inter2014'             `inter2017'   if `sample' & year~=. 
> & (year>=2014 & year<=2017) & year~=2016 & `depvar'~=., cluster(cvar)
 42.                 test `inter2014'  `inter2017'
 43. }
 44. 
. * -- Assumption A6 post-treatment ``test''
. 
.         reg `depvar' pension65 i2014 i2016 i2017 `instlist9' `inter2014' `inter2016' `inter2017'   if `sample' & ye
> ar~=. & (year>=2014 & year<=2017), cluster(cvar)
 45.                 test `inter2014' `inter2016' `inter2017'
 46. 
. if "`depvar'"=="employed"       {
 47.         reg `depvar' pension65 i2014       i2017 `instlist9' `inter2014'             `inter2017'   if `sample' &
>  year~=. & (year>=2014 & year<=2017) & year~=2016, cluster(cvar)
 48.                 test `inter2014'  `inter2017'   
 49. }
 50. 
.                                                                 }




>>>>>>>>>>> <<<<<<<<<<<<<
sample: age>=65 & year~=2012 & year~=2013 & year<=2017

depvar: employed

instruments: floor1 floor2 wall1 wall2 wall3 water1 water2 rural residence edu
>>>>>>>>>>> <<<<<<<<<<<<<

Step 1
Iteration 0:   GMM criterion Q(b) =  .15461323  
Iteration 1:   GMM criterion Q(b) =  8.721e-06  
Iteration 2:   GMM criterion Q(b) =  8.721e-06  

Step 2
Iteration 0:   GMM criterion Q(b) =  .00228274  
Iteration 1:   GMM criterion Q(b) =  .00101326  
Iteration 2:   GMM criterion Q(b) =  .00101323  

GMM estimation 

Number of parameters =  33
Number of moments    =  81
Initial weight matrix: Identity                   Number of obs   =     49,069
GMM weight matrix:     Cluster (cvar)

                               (Std. err. adjusted for 11,566 clusters in cvar)
-------------------------------------------------------------------------------
              |               Robust
              | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
--------------+----------------------------------------------------------------
   /zb_floor1 |   .1971396   .0470269     4.19   0.000     .1049685    .2893106
   /zb_floor2 |  -.0128863   .0476651    -0.27   0.787    -.1063081    .0805355
    /zb_wall1 |   .0498935   .0462003     1.08   0.280    -.0406574    .1404445
    /zb_wall2 |   .1452007   .0460511     3.15   0.002     .0549423    .2354592
    /zb_wall3 |  -.0160191    .046279    -0.35   0.729    -.1067243    .0746861
   /zb_water1 |  -.0321003    .020359    -1.58   0.115    -.0720032    .0078025
   /zb_water2 |   .0019467   .0165444     0.12   0.906    -.0304797    .0343731
    /zb_rural |   .0397864   .0132304     3.01   0.003     .0138553    .0657176
/zb_residence |   .0276949   .0043256     6.40   0.000     .0192168    .0361729
     /zb_educ |  -.0396881   .0013638   -29.10   0.000    -.0423611    -.037015
     /zb_cons |   .1348868   .0344789     3.91   0.000     .0673093    .2024642
     /did2014 |  -.0197509    .031453    -0.63   0.530    -.0813976    .0418959
          /b0 |   .0080899   .0305122     0.27   0.791    -.0517129    .0678926
  /pxb_floor1 |  -.0454587   .0280844    -1.62   0.106    -.1005031    .0095856
  /pxb_floor2 |  -.1200571   .0286335    -4.19   0.000    -.1761777   -.0639364
   /pxb_wall1 |   .0847229   .0304763     2.78   0.005     .0249904    .1444554
   /pxb_wall2 |   .0554321   .0304052     1.82   0.068     -.004161    .1150251
   /pxb_wall3 |  -.0002695   .0306075    -0.01   0.993    -.0602592    .0597201
  /pxb_water1 |   .0242331   .0134725     1.80   0.072    -.0021725    .0506388
  /pxb_water2 |  -.0208105    .011801    -1.76   0.078      -.04394     .002319
   /pxb_rural |    .071468   .0102072     7.00   0.000     .0514622    .0914738
/pxb_reside~e |   .0553822   .0046755    11.85   0.000     .0462184     .064546
    /pxb_educ |   .0405061   .0016502    24.55   0.000     .0372718    .0437404
 /xb2014_cons |   .3051715   .0332442     9.18   0.000     .2400141    .3703289
     /did2015 |  -.0064861    .031417    -0.21   0.836    -.0680623    .0550901
 /xb2015_cons |   .3096802    .033475     9.25   0.000     .2440705      .37529
     /did2016 |  -.0161761   .0314886    -0.51   0.607    -.0778926    .0455404
 /xb2016_cons |   .3284279   .0333647     9.84   0.000     .2630343    .3938215
     /did2017 |  -.0305441   .0313673    -0.97   0.330    -.0920228    .0309346
 /xb2017_cons |   .3285652   .0334299     9.83   0.000     .2630438    .3940867
     /did2010 |   .0484112   .0387569     1.25   0.212     -.027551    .1243734
 /xb2010_cons |   .3124336   .0345131     9.05   0.000     .2447891    .3800781
 /xb2011_cons |   .3244479   .0344885     9.41   0.000     .2568517    .3920442
-------------------------------------------------------------------------------
Instruments for equation 1: floor1 floor2 wall1 wall2 wall3 water1 water2 rural residence educ _cons
Instruments for equation 2: pension65 floor1 floor2 wall1 wall2 wall3 water1 water2 rural residence educ _cons
Instruments for equation 3: pension65 floor1 floor2 wall1 wall2 wall3 water1 water2 rural residence educ _cons
Instruments for equation 4: pension65 floor1 floor2 wall1 wall2 wall3 water1 water2 rural residence educ _cons
Instruments for equation 5: pension65 floor1 floor2 wall1 wall2 wall3 water1 water2 rural residence educ _cons
Instruments for equation 6: floor1 floor2 wall1 wall2 wall3 water1 water2 rural residence educ _cons
Instruments for equation 7: floor1 floor2 wall1 wall2 wall3 water1 water2 rural residence educ _cons
   1:   3483.49 /        1 =    3483.4890

Memployed[6,5]
            c1          c2          c3          c4          c5
r1   .04841121  -.02755098    .1243734  -.01533826   .11216069
r1           0           0           0           0           0
r1  -.01975088  -.08139765   .04189588  -.07148648   .03198472
r1  -.00648611  -.06806232    .0550901   -.0581625   .04519027
r1  -.01617606  -.07789256   .04554043  -.06797018   .03561805
r1   -.0305441  -.09202278   .03093459  -.08213863   .02105044
---------- Propensity score ------------

F-stat = 1062.0264
corr(D,Dhat) = .49035713

----------------------------------------
---------- Overid test -----------------


  Test of overidentifying restriction:

  Hansen's J chi2(48) =  49.718 (p = 0.4047)

----------------------------------------

Linear regression                               Number of obs     =     33,540
                                                F(43, 9384)       =     181.17
                                                Prob > F          =     0.0000
                                                R-squared         =     0.2503
                                                Root MSE          =     .41636

                                  (Std. err. adjusted for 9,385 clusters in cvar)
---------------------------------------------------------------------------------
                |               Robust
      pension65 | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
----------------+----------------------------------------------------------------
          i2014 |  -.0705605   .0919545    -0.77   0.443    -.2508113    .1096902
          i2016 |   .0479043   .0987997     0.48   0.628    -.1457645    .2415731
          i2017 |   .1569292   .1036869     1.51   0.130    -.0463196    .3601779
         floor1 |    .244638   .0942184     2.60   0.009     .0599495    .4293264
         floor2 |   .0295835    .095703     0.31   0.757    -.1580152    .2171822
          wall1 |   .0643515   .0955835     0.67   0.501     -.123013    .2517159
          wall2 |   .1508821    .094353     1.60   0.110    -.0340703    .3358345
          wall3 |   -.058322   .0952801    -0.61   0.540    -.2450916    .1284476
         water1 |  -.0118125   .0426709    -0.28   0.782    -.0954567    .0718318
         water2 |   .0274579   .0352583     0.78   0.436     -.041656    .0965719
          rural |     .01726   .0310023     0.56   0.578    -.0435112    .0780311
      residence |   .0242617   .0096459     2.52   0.012     .0053537    .0431697
           educ |  -.0349608    .003188   -10.97   0.000      -.04121   -.0287116
   i2014ifloor1 |  -.1526237   .1263782    -1.21   0.227    -.4003523     .095105
   i2014ifloor2 |  -.1145199   .1285877    -0.89   0.373    -.3665797      .13754
    i2014iwall1 |   .0148446   .1356488     0.11   0.913    -.2510565    .2807457
    i2014iwall2 |   .0848347   .1347193     0.63   0.529    -.1792443    .3489137
    i2014iwall3 |   .1835283   .1354703     1.35   0.176    -.0820228    .4490794
   i2014iwater1 |   .0135215   .0559769     0.24   0.809    -.0962054    .1232484
   i2014iwater2 |  -.0343375   .0463242    -0.74   0.459     -.125143    .0564679
    i2014irural |   .0387776   .0404337     0.96   0.338    -.0404813    .1180364
i2014iresidence |   .0099694   .0125314     0.80   0.426    -.0145949    .0345336
      i2014iedu |   .0042769   .0039329     1.09   0.277    -.0034325    .0119863
   i2016ifloor1 |   .0948067   .1381688     0.69   0.493    -.1760341    .3656475
   i2016ifloor2 |   .0677646   .1405431     0.48   0.630    -.2077303    .3432595
    i2016iwall1 |  -.0880714   .1472125    -0.60   0.550    -.3766399    .2004971
    i2016iwall2 |  -.1573383   .1467841    -1.07   0.284    -.4450669    .1303904
    i2016iwall3 |  -.0761058   .1473239    -0.52   0.605    -.3648926     .212681
   i2016iwater1 |  -.0585974   .0610198    -0.96   0.337    -.1782094    .0610146
   i2016iwater2 |  -.0059603   .0499556    -0.12   0.905    -.1038841    .0919635
    i2016irural |   .0286972   .0407891     0.70   0.482    -.0512582    .1086526
i2016iresidence |   .0090606   .0137424     0.66   0.510    -.0178774    .0359987
      i2016iedu |  -.0114333   .0042771    -2.67   0.008    -.0198173   -.0030492
   i2017ifloor1 |  -.1333195   .1429258    -0.93   0.351     -.413485     .146846
   i2017ifloor2 |  -.1339286    .144341    -0.93   0.354    -.4168684    .1490111
    i2017iwall1 |   .0228364   .1267054     0.18   0.857    -.2255335    .2712064
    i2017iwall2 |   .0751725   .1259373     0.60   0.551     -.171692     .322037
    i2017iwall3 |   .0792833   .1271139     0.62   0.533    -.1698875    .3284541
   i2017iwater1 |  -.0241318   .0587043    -0.41   0.681     -.139205    .0909414
   i2017iwater2 |  -.0616192   .0472337    -1.30   0.192    -.1542076    .0309691
    i2017irural |   .0311528    .038197     0.82   0.415    -.0437216    .1060272
i2017iresidence |  -.0082139   .0118714    -0.69   0.489    -.0314844    .0150566
      i2017iedu |  -.0108728    .004141    -2.63   0.009    -.0189902   -.0027555
          _cons |   .1000725   .0683938     1.46   0.143    -.0339941     .234139
---------------------------------------------------------------------------------

 ( 1)  i2014ifloor1 = 0
 ( 2)  i2014ifloor2 = 0
 ( 3)  i2014iwall1 = 0
 ( 4)  i2014iwall2 = 0
 ( 5)  i2014iwall3 = 0
 ( 6)  i2014iwater1 = 0
 ( 7)  i2014iwater2 = 0
 ( 8)  i2014irural = 0
 ( 9)  i2014iresidence = 0
 (10)  i2014iedu = 0
 (11)  i2016ifloor1 = 0
 (12)  i2016ifloor2 = 0
 (13)  i2016iwall1 = 0
 (14)  i2016iwall2 = 0
 (15)  i2016iwall3 = 0
 (16)  i2016iwater1 = 0
 (17)  i2016iwater2 = 0
 (18)  i2016irural = 0
 (19)  i2016iresidence = 0
 (20)  i2016iedu = 0
 (21)  i2017ifloor1 = 0
 (22)  i2017ifloor2 = 0
 (23)  i2017iwall1 = 0
 (24)  i2017iwall2 = 0
 (25)  i2017iwall3 = 0
 (26)  i2017iwater1 = 0
 (27)  i2017iwater2 = 0
 (28)  i2017irural = 0
 (29)  i2017iresidence = 0
 (30)  i2017iedu = 0

       F( 30,  9384) =    4.62
            Prob > F =    0.0000

Linear regression                               Number of obs     =     25,504
                                                F(32, 6751)       =     173.86
                                                Prob > F          =     0.0000
                                                R-squared         =     0.2472
                                                Root MSE          =     .41486

                                  (Std. err. adjusted for 6,752 clusters in cvar)
---------------------------------------------------------------------------------
                |               Robust
      pension65 | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
----------------+----------------------------------------------------------------
          i2014 |  -.0705605   .0919552    -0.77   0.443    -.2508217    .1097006
          i2017 |   .1569292   .1036876     1.51   0.130    -.0463313    .3601896
         floor1 |    .244638    .094219     2.60   0.009     .0599389     .429337
         floor2 |   .0295835   .0957037     0.31   0.757     -.158026     .217193
          wall1 |   .0643515   .0955842     0.67   0.501    -.1230238    .2517267
          wall2 |   .1508821   .0943537     1.60   0.110    -.0340809    .3358451
          wall3 |   -.058322   .0952808    -0.61   0.540    -.2451023    .1284584
         water1 |  -.0118125   .0426712    -0.28   0.782    -.0954615    .0718366
         water2 |   .0274579   .0352586     0.78   0.436      -.04166    .0965759
          rural |     .01726   .0310025     0.56   0.578    -.0435147    .0780346
      residence |   .0242617    .009646     2.52   0.012     .0053526    .0431708
           educ |  -.0349608    .003188   -10.97   0.000    -.0412103   -.0287112
   i2014ifloor1 |  -.1526237   .1263791    -1.21   0.227    -.4003665    .0951192
   i2014ifloor2 |  -.1145199   .1285887    -0.89   0.373    -.3665942    .1375545
    i2014iwall1 |   .0148446   .1356498     0.11   0.913    -.2510717     .280761
    i2014iwall2 |   .0848347   .1347203     0.63   0.529    -.1792595    .3489289
    i2014iwall3 |   .1835283   .1354712     1.35   0.176     -.082038    .4490947
   i2014iwater1 |   .0135215   .0559773     0.24   0.809    -.0962117    .1232547
   i2014iwater2 |  -.0343375   .0463245    -0.74   0.459    -.1251482    .0564732
    i2014irural |   .0387776    .040434     0.96   0.338    -.0404858     .118041
i2014iresidence |   .0099694   .0125315     0.80   0.426    -.0145963     .034535
      i2014iedu |   .0042769    .003933     1.09   0.277    -.0034329    .0119868
   i2017ifloor1 |  -.1333195   .1429268    -0.93   0.351    -.4135011    .1468621
   i2017ifloor2 |  -.1339286   .1443421    -0.93   0.354    -.4168846    .1490273
    i2017iwall1 |   .0228364   .1267063     0.18   0.857    -.2255478    .2712207
    i2017iwall2 |   .0751725   .1259382     0.60   0.551    -.1717062    .3220512
    i2017iwall3 |   .0792833   .1271148     0.62   0.533    -.1699018    .3284684
   i2017iwater1 |  -.0241318   .0587048    -0.41   0.681    -.1392116     .090948
   i2017iwater2 |  -.0616192    .047234    -1.30   0.192    -.1542129    .0309744
    i2017irural |   .0311528   .0381973     0.82   0.415    -.0437259    .1060315
i2017iresidence |  -.0082139   .0118715    -0.69   0.489    -.0314857    .0150579
      i2017iedu |  -.0108728   .0041411    -2.63   0.009    -.0189906    -.002755
          _cons |   .1000725   .0683942     1.46   0.143    -.0340018    .2341467
---------------------------------------------------------------------------------

 ( 1)  i2014ifloor1 = 0
 ( 2)  i2014ifloor2 = 0
 ( 3)  i2014iwall1 = 0
 ( 4)  i2014iwall2 = 0
 ( 5)  i2014iwall3 = 0
 ( 6)  i2014iwater1 = 0
 ( 7)  i2014iwater2 = 0
 ( 8)  i2014irural = 0
 ( 9)  i2014iresidence = 0
 (10)  i2014iedu = 0
 (11)  i2017ifloor1 = 0
 (12)  i2017ifloor2 = 0
 (13)  i2017iwall1 = 0
 (14)  i2017iwall2 = 0
 (15)  i2017iwall3 = 0
 (16)  i2017iwater1 = 0
 (17)  i2017iwater2 = 0
 (18)  i2017irural = 0
 (19)  i2017iresidence = 0
 (20)  i2017iedu = 0

       F( 20,  6751) =    5.35
            Prob > F =    0.0000

Linear regression                               Number of obs     =     33,540
                                                F(44, 9384)       =      49.84
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0663
                                                Root MSE          =     .47998

                                  (Std. err. adjusted for 9,385 clusters in cvar)
---------------------------------------------------------------------------------
                |               Robust
       employed | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
----------------+----------------------------------------------------------------
      pension65 |   -.008183   .0063374    -1.29   0.197    -.0206057    .0042398
          i2014 |   .1966719      .1079     1.82   0.068    -.0148356    .4081794
          i2016 |   .1644908   .1044201     1.58   0.115    -.0401951    .3691768
          i2017 |   .1518322   .1062242     1.43   0.153    -.0563903    .3600546
         floor1 |  -.0507095    .065925    -0.77   0.442    -.1799368    .0785178
         floor2 |  -.1032092   .0671259    -1.54   0.124    -.2347905    .0283721
          wall1 |   .1617929   .0752438     2.15   0.032     .0142987    .3092871
          wall2 |   .1180512   .0750067     1.57   0.116    -.0289782    .2650806
          wall3 |   .0493001   .0750582     0.66   0.511    -.0978302    .1964305
         water1 |   .0785383   .0426804     1.84   0.066    -.0051246    .1622011
         water2 |   .0424817   .0383699     1.11   0.268    -.0327316     .117695
          rural |     .05004   .0237932     2.10   0.035     .0034001    .0966799
      residence |    .066964   .0104904     6.38   0.000     .0464005    .0875274
           educ |    .044744     .00386    11.59   0.000     .0371775    .0523105
   i2014ifloor1 |  -.0037306    .094131    -0.04   0.968    -.1882478    .1807866
   i2014ifloor2 |  -.0480761   .0959052    -0.50   0.616    -.2360712     .139919
    i2014iwall1 |  -.0448886   .1125035    -0.40   0.690    -.2654199    .1756427
    i2014iwall2 |  -.0648828   .1122819    -0.58   0.563    -.2849798    .1552142
    i2014iwall3 |  -.0421086   .1128088    -0.37   0.709    -.2632382    .1790211
   i2014iwater1 |  -.1078666   .0528803    -2.04   0.041    -.2115234   -.0042097
   i2014iwater2 |  -.0962555   .0468787    -2.05   0.040    -.1881478   -.0043631
    i2014irural |   .0264068   .0336665     0.78   0.433    -.0395868    .0924005
i2014iresidence |  -.0175937   .0147267    -1.19   0.232    -.0464613    .0112739
      i2014iedu |  -.0045276   .0054005    -0.84   0.402    -.0151137    .0060586
   i2016ifloor1 |   .0552142   .0989557     0.56   0.577    -.1387604    .2491888
   i2016ifloor2 |   .0158049   .1007299     0.16   0.875    -.1816476    .2132573
    i2016iwall1 |  -.1396457   .1111197    -1.26   0.209    -.3574644     .078173
    i2016iwall2 |   -.109149   .1118781    -0.98   0.329    -.3284543    .1101562
    i2016iwall3 |  -.1053829   .1119744    -0.94   0.347     -.324877    .1141112
   i2016iwater1 |   -.026139   .0564418    -0.46   0.643    -.1367771    .0844991
   i2016iwater2 |  -.0436158   .0496466    -0.88   0.380     -.140934    .0537023
    i2016irural |   .0441969   .0330117     1.34   0.181    -.0205132     .108907
i2016iresidence |  -.0247361   .0148056    -1.67   0.095    -.0537582     .004286
      i2016iedu |  -.0002583   .0054539    -0.05   0.962    -.0109491    .0104326
   i2017ifloor1 |   .0514394   .0983935     0.52   0.601    -.1414332     .244312
   i2017ifloor2 |   .0412178   .1000681     0.41   0.680    -.1549374    .2373729
    i2017iwall1 |  -.1334243   .0974309    -1.37   0.171    -.3244099    .0575614
    i2017iwall2 |  -.1245011   .0968261    -1.29   0.199    -.3143013    .0652992
    i2017iwall3 |  -.1095957     .09745    -1.12   0.261    -.3006189    .0814275
   i2017iwater1 |  -.0188304   .0544172    -0.35   0.729    -.1254999    .0878391
   i2017iwater2 |  -.0266091   .0475042    -0.56   0.575    -.1197277    .0665094
    i2017irural |   .0435337   .0330605     1.32   0.188     -.021272    .1083395
i2017iresidence |  -.0235944   .0148005    -1.59   0.111    -.0526066    .0054178
      i2017iedu |  -.0096944   .0052781    -1.84   0.066    -.0200406    .0006518
          _cons |   .1671596   .0760909     2.20   0.028      .018005    .3163143
---------------------------------------------------------------------------------

 ( 1)  i2014ifloor1 = 0
 ( 2)  i2014ifloor2 = 0
 ( 3)  i2014iwall1 = 0
 ( 4)  i2014iwall2 = 0
 ( 5)  i2014iwall3 = 0
 ( 6)  i2014iwater1 = 0
 ( 7)  i2014iwater2 = 0
 ( 8)  i2014irural = 0
 ( 9)  i2014iresidence = 0
 (10)  i2014iedu = 0
 (11)  i2016ifloor1 = 0
 (12)  i2016ifloor2 = 0
 (13)  i2016iwall1 = 0
 (14)  i2016iwall2 = 0
 (15)  i2016iwall3 = 0
 (16)  i2016iwater1 = 0
 (17)  i2016iwater2 = 0
 (18)  i2016irural = 0
 (19)  i2016iresidence = 0
 (20)  i2016iedu = 0
 (21)  i2017ifloor1 = 0
 (22)  i2017ifloor2 = 0
 (23)  i2017iwall1 = 0
 (24)  i2017iwall2 = 0
 (25)  i2017iwall3 = 0
 (26)  i2017iwater1 = 0
 (27)  i2017iwater2 = 0
 (28)  i2017irural = 0
 (29)  i2017iresidence = 0
 (30)  i2017iedu = 0

       F( 30,  9384) =    0.92
            Prob > F =    0.5989

Linear regression                               Number of obs     =     25,504
                                                F(33, 6751)       =      48.36
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0643
                                                Root MSE          =     .48012

                                  (Std. err. adjusted for 6,752 clusters in cvar)
---------------------------------------------------------------------------------
                |               Robust
       employed | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
----------------+----------------------------------------------------------------
      pension65 |  -.0073762   .0073384    -1.01   0.315    -.0217618    .0070094
          i2014 |   .1967288   .1079075     1.82   0.068    -.0148038    .4082615
          i2017 |   .1517056   .1062365     1.43   0.153    -.0565514    .3599626
         floor1 |  -.0509068   .0659335    -0.77   0.440    -.1801573    .0783437
         floor2 |  -.1032331   .0671387    -1.54   0.124    -.2348462      .02838
          wall1 |    .161741   .0752439     2.15   0.032     .0142393    .3092427
          wall2 |   .1179294   .0750088     1.57   0.116    -.0291114    .2649703
          wall3 |   .0493472   .0750584     0.66   0.511    -.0977909    .1964853
         water1 |   .0785478   .0426833     1.84   0.066     -.005125    .1622206
         water2 |   .0424595   .0383719     1.11   0.269    -.0327615    .1176806
          rural |   .0500261   .0237921     2.10   0.036      .003386    .0966661
      residence |   .0669444   .0104921     6.38   0.000     .0463766    .0875121
           educ |   .0447722   .0038604    11.60   0.000     .0372047    .0523398
   i2014ifloor1 |  -.0036074    .094138    -0.04   0.969    -.1881476    .1809327
   i2014ifloor2 |  -.0479837   .0959132    -0.50   0.617    -.2360038    .1400364
    i2014iwall1 |  -.0449006    .112524    -0.40   0.690    -.2654832     .175682
    i2014iwall2 |  -.0649512   .1123064    -0.58   0.563    -.2851072    .1552047
    i2014iwall3 |  -.0422566   .1128394    -0.37   0.708    -.2634575    .1789443
   i2014iwater1 |  -.1078775   .0528823    -2.04   0.041    -.2115435   -.0042114
   i2014iwater2 |  -.0962278   .0468816    -2.05   0.040    -.1881304   -.0043251
    i2014irural |   .0263755   .0336642     0.78   0.433    -.0396168    .0923679
i2014iresidence |  -.0176017   .0147266    -1.20   0.232    -.0464705     .011267
      i2014iedu |   -.004531   .0054006    -0.84   0.402    -.0151179    .0060559
   i2017ifloor1 |   .0515469    .098418     0.52   0.600    -.1413833    .2444772
   i2017ifloor2 |   .0413258   .1000926     0.41   0.680    -.1548873    .2375389
    i2017iwall1 |  -.1334427   .0974459    -1.37   0.171    -.3244674    .0575821
    i2017iwall2 |  -.1245617   .0968428    -1.29   0.198    -.3144042    .0652808
    i2017iwall3 |  -.1096596   .0974664    -1.13   0.261    -.3007246    .0814053
   i2017iwater1 |  -.0188109   .0544186    -0.35   0.730    -.1254885    .0878667
   i2017iwater2 |  -.0265594   .0475064    -0.56   0.576     -.119687    .0665682
    i2017irural |   .0435086   .0330579     1.32   0.188    -.0212954    .1083126
i2017iresidence |  -.0235878   .0148008    -1.59   0.111     -.052602    .0054264
      i2017iedu |  -.0096856   .0052787    -1.83   0.067    -.0200336    .0006623
          _cons |   .1670789   .0760985     2.20   0.028     .0179019    .3162559
---------------------------------------------------------------------------------

 ( 1)  i2014ifloor1 = 0
 ( 2)  i2014ifloor2 = 0
 ( 3)  i2014iwall1 = 0
 ( 4)  i2014iwall2 = 0
 ( 5)  i2014iwall3 = 0
 ( 6)  i2014iwater1 = 0
 ( 7)  i2014iwater2 = 0
 ( 8)  i2014irural = 0
 ( 9)  i2014iresidence = 0
 (10)  i2014iedu = 0
 (11)  i2017ifloor1 = 0
 (12)  i2017ifloor2 = 0
 (13)  i2017iwall1 = 0
 (14)  i2017iwall2 = 0
 (15)  i2017iwall3 = 0
 (16)  i2017iwater1 = 0
 (17)  i2017iwater2 = 0
 (18)  i2017irural = 0
 (19)  i2017iresidence = 0
 (20)  i2017iedu = 0

       F( 20,  6751) =    1.04
            Prob > F =    0.4152




>>>>>>>>>>> <<<<<<<<<<<<<
sample: age>=65 & year~=2012 & year~=2013 & year<=2017

depvar: poor_mental_health

instruments: floor1 floor2 wall1 wall2 wall3 water1 water2 rural residence edu
>>>>>>>>>>> <<<<<<<<<<<<<

Step 1
Iteration 0:   GMM criterion Q(b) =  .00103804  
Iteration 1:   GMM criterion Q(b) =  5.152e-06  
Iteration 2:   GMM criterion Q(b) =  5.152e-06  

Step 2
Iteration 0:   GMM criterion Q(b) =  .01734675  
Iteration 1:   GMM criterion Q(b) =  .00345496  
Iteration 2:   GMM criterion Q(b) =  .00344014  
Iteration 3:   GMM criterion Q(b) =  .00343991  
Iteration 4:   GMM criterion Q(b) =  .00343991  
--Break--
r(1);

end of do-file

--Break--
r(1);

. exit, clear
